<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Calc. Sal√°rio 2026</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/icon-192.png">
  <meta name="theme-color" content="#0d47a1">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>

  <div id="toast" class="toast hidden">Configura√ß√£o Salva!</div>

  <header class="app-header">
      <div class="header-content">
          <div class="logo-area">
              <span style="font-size: 1.5rem;">üí∞</span>
              <h1>Calc. Sal√°rio<span class="highlight"> - CLT</span></h1>
          </div>
          <button id="btn-config" class="btn-config-header" aria-label="Configura√ß√µes">
              <span>‚öôÔ∏è Configurar / Adic. Descontos</span>
          </button>
      </div>
  </header>

  <main class="container">
    
    <div id="form-view" class="view active">
        <div id="nome-empresa-display" class="company-badge"></div>

        <form id="formulario">
            <input type="hidden" id="diasUteis" />
            <input type="hidden" id="domFeriados" />
            <input type="hidden" id="feriadosExtras" />

            <div class="cards-grid">
                
                <div class="card">
                    <div class="card-header">
                        <span class="icon">üìÖ</span> <h2>Dados Iniciais</h2>
                    </div>
                    <div class="card-body">
                        <div class="input-group">
                            <label>M√™s de Refer√™ncia</label>
                            <input type="month" id="mesReferencia" required />
                        </div>
                        <div class="input-group">
                            <label>Sal√°rio Mensal (R$)</label>
                            <input type="text" id="salario" inputmode="decimal" placeholder="0,00" class="input-lg" required />
                        </div>
                        
                        <div class="input-group">
                            <label class="label-bold">Situa√ß√£o</label>
                            <div class="segment-control">
                                <label><input type="radio" name="tipoDias" value="completo" checked /><span>Mensal</span></label>
                                <label><input type="radio" name="tipoDias" value="saida_ferias" /><span>M√™s de F√©rias</span></label>
                                <label><input type="radio" name="tipoDias" value="retorno_ferias" /><span>Retorno de F√©rias</span></label>
                            </div>
                        </div>

                        <div id="box-calculo-ferias" class="info-box hidden">
                            <div class="row-inputs">
                                <div class="col">
                                    <label id="lbl-data-ferias">Dia In√≠cio</label>
                                    <select id="inicioFerias"><option value="">Dia</option></select>
                                </div>
                                <div class="col" id="col-qtd">
                                    <label>Dura√ß√£o (Dias)</label>
                                    <input type="number" id="qtdDiasFerias" placeholder="30">
                                </div>
                            </div>
                            <p id="feedback-ferias" class="helper-text"></p>
                        </div>

                        <div class="row-inputs">
                            <div class="col">
                                <label>Dias Pagos</label>
                                <input type="number" id="diasTrab" readonly class="input-readonly" value="30" />
                            </div>
                            <div class="col">
                                <label>Dependentes</label>
                                <input type="number" id="dependentes" placeholder="0" />
                            </div>
                        </div>

                        <div class="input-group mt-2">
                            <label class="label-bold" style="margin-bottom:2px;">Feriados Locais</label>
                            <p class="helper-text" style="margin-bottom:10px; color:#0d47a1;">
                                <small>‚ÑπÔ∏è Adicione aqui os feriados municipais e estaduais.</small>
                            </p>
                            <div class="feriado-wrapper">
                                <select id="diaFeriado"><option value=""></option></select>
                                <button type="button" id="btn-add-feriado" class="btn-sm">Adic.</button>
                                <button type="button" id="btn-limpar-feriados" class="btn-sm btn-outline">Limpar</button>
                            </div>
                            <div id="listaFeriados" class="tags-list"></div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="icon">üìà</span> <h2>Proventos</h2>
                    </div>
                    <div class="card-body grid-2-col">
                        <div class="input-group"><label>HE 50%</label><input type="text" id="he50" class="hora-conversivel" placeholder="00:00"></div>
                        <div class="input-group"><label>HE 60%</label><input type="text" id="he60" class="hora-conversivel" placeholder="00:00"></div>
                        <div class="input-group"><label>HE 80%</label><input type="text" id="he80" class="hora-conversivel" placeholder="00:00"></div>
                        <div class="input-group"><label>HE 100%</label><input type="text" id="he100" class="hora-conversivel" placeholder="00:00"></div>
                        <div class="input-group"><label>HE 150%</label><input type="text" id="he150" class="hora-conversivel" placeholder="00:00"></div>
                        <div class="input-group"><label>Adic. Noturno</label><input type="text" id="noturno" class="hora-conversivel" placeholder="00:00"></div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="icon">üìâ</span> <h2>Descontos Vari√°veis</h2>
                    </div>
                    <div class="card-body">
                        <div class="row-inputs">
                            <div class="col"><label>Faltas (dias)</label><input type="text" id="faltas" inputmode="decimal"></div>
                            <div class="col"><label>Atrasos (hs)</label><input type="text" id="atrasos" class="hora-conversivel"></div>
                        </div>
                        
                        <div class="switch-container">
                            <label class="switch-label">
                                <span>Adiantamento Salarial</span>
                                <label class="switch">
                                    <input type="checkbox" id="chk_adiantamento" checked>
                                    <span class="slider round"></span>
                                </label>
                            </label>
                        </div>

                        <div class="summary-box">
                            <div class="summary-header">Descontos Fixos Ativos</div>
                            <div id="preview-fixos" class="summary-content"></div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        
        <div class="fab-container">
            <button type="button" id="btn-calcular" class="btn-primary-lg">CALCULAR SAL√ÅRIO</button>
        </div>
    </div>

    <div id="result-view" class="view hidden">
      <div class="result-card">
          <div id="resultado-container"></div>
      </div>
      <div class="actions-footer">
          <button type="button" id="btn-voltar" class="btn-secondary">Voltar / Editar</button>
          <button type="button" id="btn-pdf" class="btn-primary">Baixar PDF</button>
      </div>
    </div>

  </main>

  <div id="modal-config" class="modal hidden">
      <div class="modal-content">
          <div class="modal-header">
              <h2>Configura√ß√µes</h2>
              <span id="btn-close-modal" class="close-icon">&times;</span>
          </div>
          
          <div class="modal-body">
              <div class="input-group">
                  <label>Nome da Empresa</label>
                  <input type="text" id="cfg_nome_empresa" placeholder="Ex: Minha F√°brica LTDA">
              </div>

              <div class="row-inputs">
                  <div class="col">
                      <label>Percentual de Adiantamento</label>
                      <input type="number" id="cfg_perc_adiantamento" placeholder="40">
                  </div>
                  <div class="col">
                      <label>Percentual de Adic. Noturno</label>
                      <input type="number" id="cfg_perc_noturno" placeholder="20">
                  </div>
              </div>

              <div class="divider"></div>
              
              <h3>Descontos Fixos</h3>
              <p class="helper-text">Adicione VT, Plano de Sa√∫de, Sindicato, etc.</p>
              
              <div id="container-lista-config" class="dynamic-list"></div>

              <button type="button" id="btn-adic.-novo-desconto" class="btn-dashed">+ Novo Desconto</button>
          </div>

          <div class="modal-footer">
              <button type="button" id="btn-save-config" class="btn-primary-block">Salvar Altera√ß√µes</button>
          </div>
      </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  
  <script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('./sw.js').catch(()=>{});
        });
    }
  </script>
  
  <script src="app.js"></script>
</body>
</html>





